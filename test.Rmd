Reproducible ResearchProject One -- Todd Flanders
========================================================

# 1 - Create data for analysis

```{r import dependancies}
library(plyr)
```

Unzip the data.  The zip file activity.zip was part of the original project,
forked from https://github.com/rdpeng/RepData_PeerAssessment1

```{r unzipAndReadData}
unzip("activity.zip")
originaldata <- read.csv("activity.csv")
```

Convert date factor to date
```{r dataConversion}
originaldata$datePosix <- as.POSIXlt(originaldata$date)
```

Add the interval in minutes to the timestamp to get samples in 5 minute intervals

```{r computeTimeStamp}
originaldata$datePosix$min <- originaldata$datePosix$min + originaldata$interval 
```

Add a column for day of week.

```{r addWday}
originaldata$wday <- originaldata$datePosix$wday
```

Create meta variables

```{r createMetaVars}
numDays <- as.integer(max(originaldata$datePosix) - min(originaldata$datePosix)) 
samplesPerDay <- length(originaldata$date) / numDays
```

Analyze missing step data

```{r calulateMissingStepData}
dataDirty <- originaldata[is.na(originaldata$steps),]
dirtyByDay <- ddply(dataDirty[1:2], .(date), numcolwise(length))
```

Here are the days with missing data out of `r samplesPerDay` samples per day:

```{r showtable}
print(dirtyByDay)
```
 
We will fill in missing values with the mean of the 5 minute interval for 
the day of week (Sun-Sat).

```{r calulateMissingData}
dataClean <- originaldata[!is.na(data$steps),]
averageByIntervalAndWday <- ddply(dataClean[c(1,3,5)], .(interval, wday), numcolwise(mean))
averageByIntervalAndWday$steps <- round(averageByIntervalAndWday$steps, digits=0)
# TODO finish
```

Summarize total data by day

```{r summarize}
# TODO: this needs to be on the data with imputed values
totalsByDay <- ddply(dataClean[1:2], .(date), numcolwise(sum))
```

# 2 - What is mean total number of steps taken per day?

## Make a histogram of the total number of steps taken each day


```{r fig.width=7, fig.height=4}
hist(
  totalsByDay$steps, 
  main="Total Number of Steps Taken Each Day",
  xlab = "steps per day"
)
```

## Calculate and report the mean and median total number of steps taken per day

```{r meanTotalStepsPerDay}
meanStepsPerDay <- round(mean(totalsByDay$steps, na.rm = TRUE), digits = 0)
medianStepsPerDay <- median(totalsByDay$steps, na.rm = TRUE)
```

```{r printMean}
print(meanStepsPerDay)
```

```{r printMedian}
print(medianStepsPerDay)
```
